<?xml version="1.0" encoding="UTF-8"?>
<jndiConfig xmlns="http://wsrf.globus.org/jndi/config">
  <global>
    <resource name="nciaDatabase" type="com.mchange.v2.c3p0.ComboPooledDataSource">
      <resourceParams>         
        <parameter>
          <name>driverClass</name>
          <value>com.mysql.jdbc.Driver</value>
        </parameter>
        <parameter>
          <name>jdbcUrl</name>
          <value>@databaseConnectionUrl@</value>
        </parameter>
        <parameter>
          <name>user</name>
          <value>@databaseUser@</value>
        </parameter>
        <parameter>
          <name>password</name>
          <value>@databasePassword@</value>
        </parameter>
        
        
        <parameter>
          <name>factory</name>
          <value>org.apache.naming.factory.BeanFactory</value>
        </parameter>  
        <!--
        <parameter>
          <name>c3p0.min_size</name>
          <value>3</value>
        </parameter>  
        <parameter>
          <name>c3p0.max_size</name>
          <value>20</value>
        </parameter>
       
        <parameter>
          <name>timeout</name>
          <value>10</value>
        </parameter>
         -->
        <parameter>
          <name>acquireRetryAttempts</name>
          <value>30</value>
        </parameter>
        <parameter>
          <name>acquireIncrement</name>
          <value>5</value>
        </parameter>
        <parameter>
          <name>idleConnectionTestPeriod</name>
          <value>9</value>
        </parameter>
        <parameter>
          <name>initialPoolSize</name>
          <value>5</value>
        </parameter>
        <parameter>
          <name>maxPoolSize</name>
          <value>20</value>
        </parameter>
        <parameter>
          <name>maxIdleTime</name>
          <value>14400</value>
        </parameter> <!-- 4 hours idle -->
        <parameter>
          <name>maxStatements</name>
          <value>50</value>
        </parameter> <!-- max statements in cache -->
        <parameter>
          <name>minPoolSize</name>
          <value>5</value>
        </parameter>        
      </resourceParams>
    </resource>  
  </global>
  
  <service name="cagrid/NCIACoreService">
    <resource name="configuration" type="gov.nih.nci.cagrid.ncia.service.globus.resource.NCIACoreServiceResourceConfiguration">
      <resourceParams>
        <parameter>
          <name>factory</name>
          <value>org.globus.wsrf.jndi.BeanFactory</value>
        </parameter>
        <parameter>
          <name>performRegistration</name>
          <!-- Set this to false to skip ServiceGroup registration -->
          <value>true</value>
        </parameter>
        <parameter>
          <name>registrationTemplateFile</name>
          <!-- Set this to the relative path (from the container root, e.g GLOBUS_LOCATION for globus container) of the registration parameters template file (ignored if performRegistration is false) -->
          <value>etc/cagrid_NCIACoreService/NCIACoreService_registration.xml</value>
        </parameter>
        <parameter>
          <name>domainModelFile</name>
          <!-- Set this to the relative path (from the container root, e.g GLOBUS_LOCATION for globus container) of the domainModel extract -->
          <value>etc/cagrid_NCIACoreService/domainModel.xml</value>
        </parameter>
        <parameter>
          <name>serviceMetadataFile</name>
          <!-- Set this to the relative path (from the container root, e.g GLOBUS_LOCATION for globus container) of the serviceMetadata extract -->
          <value>etc/cagrid_NCIACoreService/serviceMetadata.xml</value>
        </parameter>
      </resourceParams>
    </resource>
    <resource name="serviceconfiguration" type="gov.nih.nci.cagrid.ncia.service.NCIACoreServiceConfiguration">
      <resourceParams>
        <parameter>
          <name>factory</name>
          <value>org.globus.wsrf.jndi.BeanFactory</value>
        </parameter>
        <parameter>
          <name>etcDirectoryPath</name>
          <value>etc/cagrid_NCIACoreService</value>
        </parameter>
        <parameter>
          <name>queryProcessorClass</name>
          <value>gov.nih.nci.cagrid.ncia.service.NCIAQueryProcessor</value>
        </parameter>
        <parameter>
          <name>sdk4Style_beansJarFileName</name>
          <value>ncia-beans.jar</value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_applicationName</name>
          <value>ncia-api</value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_queryCaseInsensitive</name>
          <value>true</value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_useLocalApiFlag</name>
          <value>false</value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_ormJarName</name>
          <value></value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_applicationHostName</name>
          <value>http://nciavjbossdev5004.nci.nih.gov</value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_applicationHostPort</name>
          <value>19080</value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_useServiceLogin</name>
          <value>false</value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_useGridIdentityLogin</name>
          <value></value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_staticLoginUsername</name>
          <value></value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_staticLoginPassword</name>
          <value></value>
        </parameter>
        <parameter>
          <name>serverConfigLocation</name>
          <value>etc/cagrid_NCIACoreService/server-config.wsdd</value>
        </parameter>
        <parameter>
          <name>dataService_cqlValidatorClass</name>
          <value>gov.nih.nci.cagrid.data.cql.validation.ObjectWalkingCQLValidator</value>
        </parameter>
        <parameter>
          <name>dataService_domainModelValidatorClass</name>
          <value>gov.nih.nci.cagrid.data.cql.validation.DomainModelValidator</value>
        </parameter>
        <parameter>
          <name>dataService_validateCqlFlag</name>
          <value>false</value>
        </parameter>
        <parameter>
          <name>dataService_validateDomainModelFlag</name>
          <value>false</value>
        </parameter>
        <parameter>
          <name>dataService_classMappingsFilename</name>
          <value>etc/cagrid_NCIACoreService/classToQname.xml</value>
        </parameter>
        <parameter>
          <name>cqlQueryProcessorConfig_domainTypesInfoFilename</name>
          <value>etc/cagrid_NCIACoreService/ncia-domainTypesInformation.xml</value>
        </parameter>
        <parameter>
          <name>databaseDataSource</name>
          <value>java:comp/env/nciaDatabase</value>
        </parameter>        
        <!--        
        <parameter>
          <name>databaseConnectionUrl</name>
          <value>@databaseConnectionUrl@</value>
        </parameter>  
        <parameter>
          <name>databaseUser</name>
          <value>@databaseUser@</value>
        </parameter>
        <parameter>
          <name>databasePassword</name>
          <value>@databasePassword@</value>
        </parameter>
        -->
        <parameter>
          <name>gridServiceUrl</name>
          <value>http://nciavgriddev5004.nci.nih.gov:18080/wsrf/services/cagrid/NCIACoreService</value>
        </parameter>
        <parameter>
          <name>nciaPublicGroup</name>
          <value>PUBLIC-GRID</value>
        </parameter>
        <!--
        <parameter>
          <name>databaseDriver</name>
          <value>com.mysql.jdbc.Driver</value>
        </parameter>
        -->
        <parameter>
          <name>tempZipLocation</name>
          <value>/local/home/tomcat5/temp-zip-location/</value>
        </parameter>
      </resourceParams>
    </resource>
    <resource name="home" type="gov.nih.nci.cagrid.ncia.service.globus.resource.NCIACoreServiceResourceHome">
      <resourceParams>
        <parameter>
          <name>factory</name>
          <value>org.globus.wsrf.jndi.BeanFactory</value>
        </parameter>
      </resourceParams>
    </resource>
  </service>
</jndiConfig>

